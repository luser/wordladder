$def with(game)
$code
  def finished():
    if game.done:
      return "(finished)"
    return ""
$def form(m):
  $if not game.done:
    <form method="POST" action="/game/${game}/play"><input type="hidden" name="moveid" value="$m.id"><input type="text" name="word"></input></form>
$def word(m, w):
  $if w == game.end:
    <span id="m${m.id}" class="end move">$w</span>
  $else:
    <span id="m${m.id}" class="move">$w</span>
$def move(m):
  <ul>$:word(m, m.word) $:form(m)
  $if m.children:
    $for c in m.children:
      <li>$:move(c)
  </ul>
<!DOCTYPE html>
<html><head><title>Word Ladder: $game.start &rarr; $game.end $finished()</title>
<link rel="stylesheet" type="text/css" href="/static/site.css">
<script type="text/javascript" src="/static/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="/static/game.js"></script>
</head>
<body>
<h1>$game.start &rarr; $game.end $finished()</h1>
$:move(game.moves[1])
<p><a href="/">Back to game list</a>
</body>
</html>
